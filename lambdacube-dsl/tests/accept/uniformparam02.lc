render modelViewProj = let
  emptyFB           = FrameBuffer (DepthImage #1 1000.0)
  rasterCtx         = LineCtx 1.0 LastVertex
  fragmentCtx       = AccumulationContext (DepthOp Less False)
  vertexShader v    = VertexOut v 1.0 () (Flat v)
  vertexStream      = Fetch "stream" Lines (IV4F "position")
  primitiveStream   = Transform vertexShader vertexStream
  fragmentStream    = Rasterize rasterCtx primitiveStream
  fragmentShader v  = FragmentOutRastDepth ()
  frame             = Accumulate fragmentCtx PassAll fragmentShader fragmentStream emptyFB
 in ScreenOut frame

main = render (Uni (IM44F "MVP"))